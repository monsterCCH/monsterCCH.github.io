---
layout: post
title: linux 环境下性能分析、压测手段
categories: perf, tools
description: linux 环境下性能分析、压测手段
keywords: stress-test
---

## 概述
在软件开发过程中，功能完成度是一方面，软件性能也是非常重要的一方面，为了测试软件性能或者特定环境下的软件性能表现，可以借助一些工具分析软件性能及构造特定环境。

## CPU压力测试

### sysbench
### 介绍

Sysbench是一种基于命令行的跨平台性能基准测试工具，用于测试数据库、CPU、文件 I/O 等系统组件的性能。Sysbench 可以运行在 Linux、Windows 和 macOS 等平台上，主要用于评估系统的各种资源在不同负载下的性能表现。Sysbench 是一个非常受欢迎的开源基准测试工具，广泛应用于云计算、数据库和软件开发等领域。

Sysbench 支持多种测试模式，其中包括：

* CPU 压力测试：测试 CPU 的计算能力。
* 内存带宽测试：测试系统内存的读写速度。
* 文件 I/O 测试：测试文件读写的性能。
* POSIX 线程测试：测试系统的线程性能。
* 数据库基准测试：测试数据库的性能。

Sysbench 的使用非常灵活，可以通过命令行参数来定制测试选项，例如测试的负载大小、持续时间等。Sysbench 还支持多线程测试，可以模拟多个并发用户对系统的访问进行性能测试。

### stress-ng
### 介绍
stress-ng 是一个 Linux 上的压力测试工具，它可以用来测试系统的稳定性和性能。它可以模拟 CPU、内存、I/O、网络等各种类型的负载，以及各种异常情况，如异常信号、内存泄漏、系统调用错误等。stress-ng 的目标是尽可能地消耗系统资源，从而使系统暴露出潜在的问题。

stress-ng 的使用非常灵活，可以通过命令行选项来指定要测试的负载类型、持续时间、并发数等参数。它还支持多种测试模式，如循环测试、随机测试等。通过这些选项和参数，可以对系统进行各种类型的压力测试，以测试系统的稳定性和性能。

除了在 Linux 上使用 stress-ng 进行系统测试和性能评估外，它还可以用于测试各种硬件设备和平台，如服务器、网络设备、嵌入式系统等。同时，stress-ng 还可以用于测试各种编程语言和应用程序的性能，以及各种开发工具和编译器的性能。

总的来说，stress-ng 是一个非常强大的系统压力测试工具，它可以帮助用户测试系统的稳定性和性能，发现系统中潜在的问题，并进行针对性的优化和改进。

### 安装
```
apt install stress-ng
```
### 使用
#### 指定 CPU 进行压力测试
```shell
taskset -c 2 stress-ng --cpu 1 --cpu-load 100
taskset -c 指定哪个 CPU , 多个可使用0,5,8-11
--cpu 指定线程数
--cpu-load 指定负载
--timeout 压测时间
```
